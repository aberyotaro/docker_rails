version: '3'
services:
  web:
    build: .
    command: bundle exec rails s -p ${WEB_PORT} -b '${WEB_HOST}'
    volumes:
      - ./src:${APP_PATH}
    ports:
      - ${WEB_PORT}:3000
    depends_on:
      - db
    tty: true
    stdin_open: true
  db:
    image: mysql:${MYSQL_VERSION}
    volumes:
      - db-volume:${MYSQL_VOLUME_PATH}
    ports:
      - ${MYSQL_PORT}:3306
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
volumes:
  db-volume:
